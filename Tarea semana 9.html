<!DOCTYPE html>
<html>
<head>
     <meta name="tipo_contenido"  content="text/html;" http-equiv="content-type" charset="utf-8">
	<title>
		
	</title>
</head>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<script type="text/javascript" src="JQUERY/jquery-3.4.1.min.js"></script>
<body id="body">

<label>Nombre</label>
<br>
<input class="w3-container" type = "text" name = "Nombre" id= "Nombre"/>
<br>
<label>Primer apellido</label>
<br>
<input class="w3-container" type = "text" name = "PApellido" id= "PApellido"/>
<br>
<label>Segundo apellido</label>
<br>
<input class="w3-container" type = "text" name = "SApellido" id= "SApellido"/>
<br>
<label>Cedula</label>
<br>
<input class="w3-container" type = "text" name = "Cedula" id= "Cedula"/>
<br>
<label>Telefono</label>
<br>
<input class="w3-container" type = "text" name = "Telefono" id= "Telefono"/>
<br>

<label>Provincia</label>
<br>
<select name="Provincia" id="Provincia">


</select>
<br>
<label>Canton</label>
<br>
<select name="Canton" id="Canton">

</select>
<br>
<label>Distrito</label>
<br>

<select name="Distrito" id="Distrito">

</select>
<br>
<label>Direccion</label>
<br>
<input class="w3-container" type = "text" name = "Direccion" id= "Direccion"/>
<br>
<button class="w3-button w3-white w3-border"  name="Agregar" id="Agregar">
    Agregar
</button>

</body>




<script>
              $(document).ready(function () {
                 
                    $.ajax({
                        dataType: "json",
                        url: "https://ubicaciones.paginasweb.cr/provincias.json",
                        data: {},
                        success: function (data) {
                            var html = "<select>";
                            for(key in data) {
                                html += "<option value='"+key+"'>"+data[key]+"</option>";
                            }
                            html += "</select";
                            $('#Provincia').html(html);
                        }
                   
                });

                $("#Provincia").click(function (evento) {

                	var Provincia = document.getElementById('Provincia').value;
                    $.ajax({
                        dataType: "json",
                        url: "https://ubicaciones.paginasweb.cr/provincia/"+Provincia+"/cantones.json",
                        data: Provincia,
                        success: function (data) {
                            var html = "<select>";
                            for(key in data) {
                                html += "<option value='"+key+"'>"+data[key]+"</option>";
                            }
                            html += "</select";
                            $('#Canton').html(html);
                        }
                    });
                });
                $("#Canton").click(function (evento) {

                	var Provincia = document.getElementById('Provincia').value;
                	var Canton = document.getElementById('Canton').value;
                    $.ajax({
                        dataType: "json",
                        url: "https://ubicaciones.paginasweb.cr/provincia/"+Provincia+"/canton/"+Canton+"/distritos.json",
                        data: Provincia,
                        success: function (data) {
                            var html = "<select>";
                            for(key in data) {
                                html += "<option value='"+key+"'>"+data[key]+"</option>";
                            }
                            html += "</select";
                            $('#Distrito').html(html);
                        }
                    });
                });  
            

                    $("#body").click(function (evento) {
                    var Nombre = "";
                    var PApellido = "";
                    var SApellido = "";
                    var Cedula =  document.getElementById('Cedula').value;
                    $.getJSON("https://apis.gometa.org/cedulas/"+ Cedula,function(datos)
                    {

                        $.each(datos.results, function(i, resultados)
                            {
                               
                                Nombre = resultados.firstname1;
                                PApellido = resultados.lastname1;
                                SApellido = resultados.lastname2;

                            });
                        
                        document.getElementById('Nombre').value = Nombre ;
                        document.getElementById('PApellido').value = PApellido ;
                        document.getElementById('SApellido').value = SApellido ;

                        
                    });

                });
         
                  
            })
        </script>
</html>